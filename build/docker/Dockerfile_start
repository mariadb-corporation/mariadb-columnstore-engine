# Stage one - install dependencies, configure and build.

# parent image
FROM rockylinux:8

ENV LANG en_US.utf8

RUN dnf update -y

RUN dnf install -y gdb git

RUN mkdir -p /mdb
RUN mkdir -p /mdb/MariaDBEnterprise
RUN mkdir -p /mdb/mariadb-columnstore-regression-test

COPY MariaDBEnterprise mdb/MariaDBEnterprise/
COPY mariadb-columnstore-regression-test /mdb/mariadb-columnstore-regression-test

RUN mdb/MariaDBEnterprise/storage/columnstore/columnstore/build/bootstrap_mcs.sh -D -d Rocky -t RelWithDebInfo -z
