[Unit]
Description=mcs-controllernode

# restart/stop mcs-controllernode on restart/stop of mcs-workernode
PartOf=mcs-workernode@1.service
After=network.target mcs-workernode@1.service

[Service]
Type=simple

User=@DEFAULT_USER@
Group=@DEFAULT_GROUP@
LimitNOFILE=65536
LimitNPROC=65536

ExecStartPre=/bin/sleep 7
ExecStart=@ENGINE_BINDIR@/controllernode fg
ExecStop=@ENGINE_BINDIR@/mcs-stop-controllernode.sh $MAINPID

Restart=on-failure
